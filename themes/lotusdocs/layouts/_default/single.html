{{ define "main" }}
{{ $page := .Page }}
<section class="d-table w-100 hero">
  <div class="content-wrapper mb-4">
    <!-- Left Column Section -->
    <aside class="left-column sidebar sidebar-style">
      <toc>
        <h4 class="text-start">Blog Navigation</h4>
        <nav id="TableOfContents">
          <ul>
            {{ $currentPage := . }}
            {{ $pages := where .Site.RegularPages "Section" "blogs" }}
            {{ $index := 0 }}
            {{ range $i, $p := $pages }}
              {{ if eq $p.Permalink $currentPage.Permalink }}
                {{ $index = $i }}
              {{ end }}
            {{ end }}
            {{ $start := cond (gt $index 5) (sub $index 5) 0 }}
            {{ $end := cond (lt (add $index 5) (len $pages)) (add $index 5) (sub (len $pages) 1) }}
            {{ range $i, $p := $pages }}
              {{ if and (ge $i $start) (le $i $end) }}
                <li>
                  <a class="{{ if eq $p.Permalink $currentPage.Permalink }}active{{ end }}" href="{{ $p.Permalink }}">
                    {{ if gt (len $p.Title) 50 }}{{ substr $p.Title 0 47 }}...{{ else }}{{ $p.Title }}{{ end }}
                  </a>
                </li>
              {{ end }}
            {{ end }}
          </ul>
        </nav>
      </toc>
    </aside>

    <!-- Main Content Section -->
    <div class="main-content">
      <div class="container-xl">
        <div class="text-start row row-cols-1 content-style">
          <h2 class="my-3">{{ .Title }}</h2>
          <div>{{ .Description | markdownify}}</div>
          <div class="">{{ .Content | markdownify}}</div>
        </div>
      </div>
    </div>

    <!-- Right Column Section -->
    <aside class="sidebar right-column sidebar-style">
      {{ if ge (len .TableOfContents) 50 }}
      <h4 class="text-start">Contents</h4>
      <toc>{{ .TableOfContents }}</toc>
    {{ end }}


    </aside>
  </div>
</section>

{{ end }}
